<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="mp.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- Help Button / Modal -->
    <!-- Top Right Controls -->
    <div class="top-right-group">
        <input type="text" id="shortcut-input" class="shortcut-input" placeholder="Cmd‚Üí" maxlength="1">
        <button id="help-btn" class="help-btn" title="Shortcuts">‚ñº</button>
    </div>
    <div id="help-modal" class="help-modal">
        <div class="help-content">
            <h3>Shortcuts</h3>
            <ul class="help-list">
                <li><span>A / L</span> Top / End</li>
                <li><span>S / K</span> Prev / Next</li>
                <li><span>D / J</span> -10s / +10s</li>
                <li><span>F / H</span> -2s / +2s</li>
                <li><span>G</span> Play / Pause</li>
                <li><span>O</span> Stop</li>
                <li><span>Q / E</span> One / Queue Loop</li>
                <li><span>W</span> Shuffle</li>
                <li><span>[ / ]</span> Copy / Delete</li>
                <li><span>V</span> Vocaloid</li>
                <li><span>1-5</span> Play Current + (N-6)</li>
                <li><span>6-0</span> Play Current + (N-5)</li>
            </ul>
            <button onclick="document.getElementById('help-modal').classList.remove('active')"
                class="btn">Close</button>
        </div>
    </div>

    <!-- Lock Overlay -->
    <div id="lock-overlay" class="lock-overlay">
        <div class="lock-icon" style="opacity: 0.2;">üîí</div>
    </div>

    <div class="app-container vertical-layout">
        <!-- New Order: 1. Player/Info, 2. Add Song, 3. Queue -->

        <div class="main-content">
            <!-- 1Ë°åÁõÆ: Player & Info -->
            <div class="player-container">
                <div id="player-wrapper" class="video-frame">
                    <div id="youtube-player"></div>
                </div>

                <div id="cumulative-time" class="cumulative-overlay">00:00:00</div>

                <!-- „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„Éª„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
                <div class="progress-overlay" id="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>

                <div class="info-group">
                    <div class="time-display">
                        <span id="current-time">0:00</span> / <span id="duration">0:00</span>
                    </div>
                    <input type="text" id="now-title" class="info-input title" placeholder="Song Title">
                    <input type="text" id="now-author" class="info-input" placeholder="Artist">
                    <input type="text" id="now-id" class="info-input" placeholder="Video ID / URL">
                </div>

                <!-- 1ÂàóÁõÆ: ASDFGOHJKL -->
                <div class="controls-row all-controls">
                    <button class="btn" id="btn-first" title="Top">Top<small>A</small></button>
                    <button class="btn" id="btn-prev" title="Prev">‚èÆ<small>S</small></button>
                    <button class="btn" id="btn-seek-back10" title="-10s">-10s<small>D</small></button>
                    <button class="btn" id="btn-seek-back" title="-2s">-2s<small>F</small></button>
                    <button class="btn" id="btn-pause" title="Play/Pause">‚ñ∂/||<small>G</small></button>
                    <button class="btn" id="btn-stop" title="Stop">‚èπ<small>O</small></button>
                    <button class="btn" id="btn-seek-fwd" title="+2s">+2s<small>H</small></button>
                    <button class="btn" id="btn-seek-fwd10" title="+10s">+10s<small>J</small></button>
                    <button class="btn" id="btn-next" title="Next">‚è≠<small>K</small></button>
                    <button class="btn" id="btn-last" title="End">End<small>L</small></button>
                    <div class="btn-group"
                        style="display: flex; gap: 0; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; position: relative;">
                        <div
                            style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); font-size: 0.55rem; color: var(--text-muted); pointer-events: none; z-index: 10;">
                            Loop</div>
                        <button class="btn" id="btn-loop"
                            style="border:none; border-radius:0; border-right:1px solid var(--border); min-width:50px; padding-top: 0.8rem;">One<small>Q</small></button>
                        <button class="btn" id="btn-queue-loop"
                            style="border:none; border-radius:0; min-width:55px; padding-top: 0.8rem;">Queue<small>E</small></button>
                    </div>
                    <button class="btn" id="btn-shuffle">Shuf<small>W</small></button>
                    <button class="btn" id="btn-copy-sel" title="Copy Selected">Copy<small>[</small></button>
                    <button class="btn" id="btn-delete" style="color: var(--accent);">Del<small>]</small></button>
                </div>

                <!-- ÊîπË°å„Åó„Å¶ÁÆ°ÁêÜÁ≥ª„Éú„Çø„É≥ -->
                <div class="controls-row io-controls">
                    <button id="btn-export" class="btn">Export</button>
                    <button id="btn-import" class="btn">Import</button>
                    <button id="btn-lock" class="btn lock-btn">üîíLock</button>
                </div>

                <!-- Èü≥ÈüøË®≠ÂÆö: Èü≥ÈáèË™øÊï¥ -->
                <div class="audio-effects add-section"
                    style="padding: 0.75rem; border-top: 1px solid var(--border); margin-top: 1rem;">
                    <div class="audio-row" style="display: flex; align-items: center; gap: 1rem;">
                        <label style="font-size: 0.85rem; color: var(--text-muted); min-width: 80px;">üîâ Volume</label>
                        <input type="range" id="volume-slider" min="0" max="100" step="1" value="100"
                            style="flex: 1; accent-color: var(--primary);">
                        <input type="number" id="volume-input" min="0" max="100" value="100"
                            style="width: 50px; background: transparent; border: 1px solid var(--border); color: var(--primary-light); text-align: center; border-radius: 4px; font-family: monospace;">
                        <span style="font-size: 0.85rem; color: var(--primary-light);">%</span>
                    </div>
                </div>
            </div>

            <!-- Add New Song (Add to Queue„ÇíÂ§ß„Åç„Åè) -->
            <div class="add-section">
                <h3
                    style="margin:0 0 0.5rem 0; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5rem;">
                    Add Song
                    <button id="btn-recommend-vocaloid" class="btn small-btn"
                        style="font-size: 0.75rem; border-color: #00ffd5; background: linear-gradient(135deg, #008080, #00aaaa) !important; color: #fff;">üíô
                        Vocaloid</button>
                </h3>
                <div class="input-row">
                    <div style="flex:1; display:flex; flex-direction:column; gap:0.5rem;">
                        <input type="text" id="add-url" class="app-input" placeholder="YouTube/YT Music Video URL">
                        <div class="input-row">
                            <input type="text" id="add-title" class="app-input add-input-large" placeholder="Song Title"
                                style="flex: 2; min-width: 150px;">
                            <input type="text" id="add-author" class="app-input add-input-large" placeholder="Artist"
                                style="flex: 1; min-width: 100px;">
                            <select id="add-tier" class="app-input tier-select">
                                <option value="">Tier</option>
                                <option value="√ó">√ó</option>
                                <option value="‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</option>
                                <option value="‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</option>
                                <option value="‚òÖ‚òÖ‚òÖ‚òÖ">‚òÖ‚òÖ‚òÖ‚òÖ</option>
                                <option value="‚òÖ‚òÖ‚òÖ">‚òÖ‚òÖ‚òÖ</option>
                                <option value="‚òÖ‚òÖ">‚òÖ‚òÖ</option>
                                <option value="‚òÖ">‚òÖ</option>
                                <option value="‚ñ≥">‚ñ≥</option>
                            </select>
                        </div>
                    </div>
                    <button id="btn-add" class="btn primary-btn big-add-btn">Add to Queue<br>([)</button>
                </div>
            </div>

            <!-- ÂÜÖÈÉ®‰øùÂ≠òÁî®ÔºàÈùûË°®Á§∫Ôºâ -->
            <div style="display: none;">
                <input type="number" id="sleep-min">
            </div>
        </div>

        <!-- Queue Section -->
        <div class="right-panel">
            <div class="queue-header">
                <div style="display: flex; flex-direction: column;">
                    <strong>Queue</strong>
                    <span id="queue-status" style="font-size: 0.7rem; opacity: 0.6;">0 / 32767</span>
                </div>
                <div class="header-actions">
                    <select id="sort-mode" class="btn small-btn sort-select"
                        style="padding: 0.2rem 0.4rem; min-width: 70px;">
                        <option value="manual">ÊâãÂãï</option>
                        <option value="tier">TierÈ†Ü</option>
                    </select>
                    <button id="btn-dedupe" class="btn orange-btn small-btn">Dedupe</button>
                    <button id="btn-clear" class="btn red-btn small-btn">Clear</button>
                </div>
            </div>
            <ul id="queue-list" class="queue-list"></ul>
            <div class="queue-footer">
                Drag: Reorder | üìã: Copy | üóëÔ∏è: Delete
            </div>
        </div>
    </div>

    <!-- Modal for File Import -->
    <input type="file" id="file-input" style="display: none;" accept=".json,.txt">

    <script src="mp.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>

</html>