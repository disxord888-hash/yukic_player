<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuki Player</title>
    <link rel="stylesheet" href="mp.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- Lock Overlay -->
    <div id="lock-overlay" class="lock-overlay">
        <div class="lock-icon">üîí</div>
    </div>
    <div id="lock-progress" class="lock-progress"></div>

    <div class="app-container">
        <!-- Left Panel: Player & Controls -->
        <div class="left-panel">
            <div class="player-container">
                <div id="player-wrapper" class="video-frame">
                    <div id="youtube-player"></div>
                </div>

                <div class="info-group">
                    <input type="text" id="now-title" class="info-input title" placeholder="Song Title">
                    <input type="text" id="now-author" class="info-input" placeholder="Artist">
                </div>

                <!-- Playback Controls -->
                <div class="controls-grid">
                    <button class="btn" id="btn-prev">‚èÆ<small>S</small></button>
                    <button class="btn" id="btn-pause" style="min-width: 80px;">‚ñ∂ / ||<small>G</small></button>
                    <button class="btn" id="btn-stop">‚èπ<small>O</small></button>
                    <button class="btn" id="btn-next">‚è≠<small>K</small></button>

                    <button class="btn" id="btn-seek-back">-2s<small>F</small></button>
                    <button class="btn" id="btn-seek-fwd">+2s<small>H</small></button>
                    <button class="btn" id="btn-loop">Loop<small>Q</small></button>
                    <button class="btn" id="btn-shuffle">Shuffle<small>W</small></button>

                    <button class="btn" id="btn-first">Top<small>D</small></button>
                    <button class="btn" id="btn-last">End<small>J</small></button>
                    <button class="btn" id="btn-delete" style="color: var(--accent);">Del<small>]</small></button>
                </div>

                <div style="font-size: 0.8rem; color: #666; text-align: center;">
                    Navigate: (1)-(5) Back 5-1 | (6)-(0) Next 1-5
                </div>
            </div>

            <!-- Add New Song -->
            <div class="add-section">
                <h3 style="margin:0 0 0.5rem 0;">Add Song</h3>
                <input type="text" id="add-url" class="app-input" placeholder="YouTube/YT Music URL or Playlist">
                <div class="input-row">
                    <input type="text" id="add-title" class="app-input" placeholder="Song Title">
                    <input type="text" id="add-author" class="app-input" placeholder="Artist">
                </div>
                <button id="btn-add" class="btn" style="width:100%; margin-top:0.5rem;">Add to Queue ([)</button>
            </div>

            <!-- JSON IO -->
            <div class="add-section">
                <div class="input-row">
                    <button id="btn-export" class="btn" style="flex:1;">Export TXT</button>
                    <button id="btn-import" class="btn" style="flex:1;">Import TXT</button>
                    <button id="btn-lock" class="btn" style="flex:1; color: #aaa;">üîí Lock (4s)</button>
                </div>
            </div>
        </div>

        <!-- Right Panel: Queue -->
        <div class="right-panel">
            <div class="queue-header">
                <div style="display: flex; flex-direction: column; gap: 0.2rem;">
                    <strong>Queue</strong>
                    <span id="queue-status" style="font-size: 0.7rem; opacity: 0.7;">0 / 32767</span>
                </div>
                <div style="display: flex; gap: 0.4rem; align-items: center;">
                    <button class="btn" id="btn-dedupe" title="Remove Duplicates"
                        style="padding: 0.25rem 0.6rem; font-size: 0.7rem;">Dedupe</button>
                    <button class="btn" id="btn-clear"
                        style="padding: 0.25rem 0.6rem; font-size: 0.7rem; min-width: 50px;">Clear</button>
                </div>
            </div>
            <ul id="queue-list" class="queue-list">
                <!-- Items generated here -->
            </ul>
            <div style="padding: 0.5rem; text-align: center; font-size: 0.8rem; color: #555; background: #000;">
                Select item + ']' to Remove. Select + '[' to Add Copy.
            </div>
        </div>
    </div>

    <!-- Modal for File Import -->
    <input type="file" id="file-input" style="display: none;" accept=".json,.txt">

    <script src="mp.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>

</html>
